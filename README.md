see vimcasts.org for tutorial about folding
http://vimcasts.org/episodes/writing-a-custom-fold-expression/

and the code for markdown folding used in the tutorial is in
https://gist.github.com/anonymous/4149842

Another similar code is (provided by author of vim-voom plugin):
https://gist.github.com/vim-voom/1035030
